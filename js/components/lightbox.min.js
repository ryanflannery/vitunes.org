/*! UIkit 2.16.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
!function(i){"function"==typeof define&&define.amd&&define(["uikit-lightbox"],function(){return jQuery.UIkit||i(window.jQuery,window.jQuery.UIkit)}),window&&window.jQuery&&window.jQuery.UIkit&&i(window.jQuery,window.jQuery.UIkit)}(function(i,t){function e(e){return o?(o.lightbox=e,o):(o=t.$(['<div class="@-modal">','<div class="@-modal-dialog @-modal-dialog-lightbox @-slidenav-position" style="margin-left:auto;margin-right:auto;width:200px;height:200px;top:'+Math.abs(window.innerHeight/2-200)+'px;">','<a href="#" class="@-modal-close @-close @-close-alt"></a>','<div class="@-lightbox-content"></div>','<div class="@-modal-spinner @-hidden"></div>',"</div>","</div>"].join("")).appendTo("body"),o.dialog=o.find(t.prefix(".@-modal-dialog:first")),o.content=o.find(t.prefix(".@-lightbox-content:first")),o.loader=o.find(t.prefix(".@-modal-spinner:first")),o.closer=o.find(t.prefix(".@-close.@-close-alt")),o.modal=t.modal(o),o.on("swipeRight swipeLeft",function(i){o.lightbox["swipeLeft"==i.type?"next":"previous"]()}).on("click","[data-lightbox-previous], [data-lightbox-next]",function(t){t.preventDefault(),o.lightbox[i(this).is("[data-lightbox-next]")?"next":"previous"]()}),t.$win.on("load resize orientationchange",t.Utils.debounce(function(){o.is(":visible")&&o.lightbox.fitSize()}.bind(this),100)),o.lightbox=e,o)}var o,n={};return t.component("lightbox",{defaults:{group:!1,duration:400,keyboard:!0},index:0,items:!1,init:function(){this.siblings=this.options.group?t.$(['[data-@-lightbox*="'+this.options.group+'"]',"[data-@-lightbox*='"+this.options.group+"']"].join(",")):this.element,this.index=this.siblings.index(this.element),this.trigger("lightbox-init",[this])},show:function(o){this.modal=e(this),this.modal.dialog.stop(),this.modal.content.stop();var n,s,h,a,d=this,l=i.Deferred();o=o||0,"object"==typeof o&&(o=this.siblings.index(o)),0>o?o=this.siblings.length-o:this.siblings[o]||(o=0),h=this.siblings.eq(o),s=h.attr("href"),a=h.attr("title"),n={lightbox:d,source:s,type:h.data("lightboxType")||"auto",index:o,promise:l,title:a,item:h,meta:{content:"",width:null,height:null}},this.index=o,this.modal.content.empty(),this.modal.is(":visible")||(this.modal.content.css({width:"",height:""}).empty(),this.modal.modal.show()),this.modal.loader.removeClass(t.prefix("@-hidden")),l.promise().done(function(){d.data=n,d.fitSize(n)}).fail(function(){alert("Loading resource failed!")}),d.trigger("show.uk.lightbox",[n])},fitSize:function(){var e=this,o=this.data,n=this.modal.dialog.outerWidth()-this.modal.dialog.width(),s=parseInt(this.modal.dialog.css("margin-top"),10)+parseInt(this.modal.dialog.css("margin-bottom"),10),h=o.meta.content,a=e.options.duration;this.siblings.length>1&&(h=[h,'<a href="#" class="uk-slidenav uk-slidenav-contrast uk-slidenav-previous uk-hidden-touch" data-lightbox-previous></a>','<a href="#" class="uk-slidenav uk-slidenav-contrast uk-slidenav-next uk-hidden-touch" data-lightbox-next></a>'].join(""));var d,l,r=i("<div>&nbsp;</div>").css({opacity:0,position:"absolute",top:0,left:0,width:"100%","max-width":e.modal.dialog.css("max-width"),padding:e.modal.dialog.css("padding"),margin:e.modal.dialog.css("margin")}),c=o.meta.width,g=o.meta.height;r.appendTo("body").width(),d=r.width(),l=window.innerHeight-2*s,r.remove(),d<o.meta.width&&(g=Math.floor(g*(d/c)),c=d),g>l&&(g=Math.floor(l),c=Math.ceil(o.meta.width*(l/o.meta.height))),this.modal.content.css("opacity",0).width(c).html(h),this.modal.dialog.find(t.prefix(".@-modal-caption")).remove(),o.title&&this.modal.dialog.append(t.prefix('<div class="@-modal-caption">')+o.title+"</div>"),"iframe"==o.type&&this.modal.content.find("iframe:first").height(g);var u=g+n,m=Math.floor(window.innerHeight/2-u/2)-s;0>m&&(m=0),this.modal.closer.addClass(t.prefix("@-hidden")),e.modal.data("mwidth")==c&&e.modal.data("mheight")==g&&(a=0),this.modal.dialog.animate({width:c+n,height:g+n,top:m},a,"swing",function(){e.modal.loader.addClass(t.prefix("@-hidden")),e.modal.content.css({width:""}).animate({opacity:1},function(){e.modal.closer.removeClass(t.prefix("@-hidden"))}),e.modal.data({mwidth:c,mheight:g})})},next:function(){this.show(this.siblings[this.index+1]?this.index+1:0)},previous:function(){this.show(this.siblings[this.index-1]?this.index-1:this.siblings.length-1)}}),t.plugin("lightbox","image",{init:function(i){i.on("show.uk.lightbox",function(i,t){if("image"==t.type||t.source&&t.source.match(/\.(jpg|jpeg|png|gif|svg)$/)){var e=function(i,e,o){t.meta={content:'<img class="uk-responsive-width" width="'+e+'" height="'+o+'" height="" src ="'+i+'">',width:e,height:o},t.type="image",t.promise.resolve()};if(n[t.source])e(t.source,n[t.source].width,n[t.source].height);else{var o=new Image;o.onerror=function(){t.promise.reject("Loading image failed")},o.onload=function(){n[t.source]={width:o.width,height:o.height},e(t.source,n[t.source].width,n[t.source].height)},o.src=t.source}}})}}),t.plugin("lightbox","youtube",{init:function(i){var t=/(\/\/.*?youtube\.[a-z]+)\/watch\?v=([^&]+)&?(.*)/,e=/youtu\.be\/(.*)/;i.on("show.uk.lightbox",function(i,o){var s,h,a=function(i,t,e){o.meta={content:'<iframe src="//www.youtube.com/embed/'+i+'" width="'+t+'" height="'+e+'" style="max-width:100%;"></iframe>',width:t,height:e},o.type="iframe",o.promise.resolve()};if((h=o.source.match(t))&&(s=h[2]),(h=o.source.match(e))&&(s=h[1]),s){if(n[s])a(s,n[s].width,n[s].height);else{var d=new Image;d.onerror=function(){n[s]={width:640,height:320},a(s,n[s].width,n[s].height)},d.onload=function(){n[s]={width:d.width,height:d.height},a(s,d.width,d.height)},d.src="//img.youtube.com/vi/"+s+"/0.jpg"}i.stopImmediatePropagation()}})}}),t.plugin("lightbox","vimeo",{init:function(t){var e,o=/(\/\/.*?)vimeo\.[a-z]+\/([0-9]+).*?/;t.on("show.uk.lightbox",function(t,s){var h,a=function(i,t,e){s.meta={content:'<iframe src="//player.vimeo.com/video/'+i+'" width="'+t+'" height="'+e+'" style="width:100%;box-sizing:border-box;"></iframe>',width:t,height:e},s.type="iframe",s.promise.resolve()};(e=s.source.match(o))&&(h=e[2],n[h]?a(h,n[h].width,n[h].height):i.ajax({type:"GET",url:"http://vimeo.com/api/oembed.json?url="+encodeURI(s.source),jsonp:"callback",dataType:"jsonp",success:function(i){n[h]={width:i.width,height:i.height},a(h,n[h].width,n[h].height)}}),t.stopImmediatePropagation())})}}),t.plugin("lightbox","video",{init:function(t){t.on("show.uk.lightbox",function(t,e){var o=function(i,t,o){e.meta={content:'<video class="uk-responsive-width" src="'+i+'" width="'+t+'" height="'+o+'" controls width="'+t+'" height="'+o+'"></video>',width:t,height:o},e.type="video",e.promise.resolve()};if("video"==e.type||e.source.match(/\.(mp4|webm|ogv)$/))if(n[e.source])o(e.source,n[e.source].width,n[e.source].height);else var s=i('<video style="position:fixed;visibility:hidden;top:-10000px;"></video>').attr("src",e.source).appendTo("body"),h=setInterval(function(){s[0].videoWidth&&(clearInterval(h),n[e.source]={width:s[0].videoWidth,height:s[0].videoHeight},o(e.source,n[e.source].width,n[e.source].height),s.remove())},20)})}}),i(function(){t.$html.on("click","[data-uk-lightbox]",function(e){e.preventDefault();var o=i(this);o.data("lightbox")||t.lightbox(o,t.Utils.options(o.attr("data-uk-lightbox"))),o.data("lightbox").show(o)}),t.$doc.on("keyup",function(i){if(o&&o.is(":visible")&&o.lightbox.options.keyboard)switch(i.preventDefault(),i.keyCode){case 37:o.lightbox.previous();break;case 39:o.lightbox.next()}})}),t.lightbox});